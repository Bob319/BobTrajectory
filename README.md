# BobTrajectory

A library that allows for on the fly trajectory generation. 

The build is a single jar that get's deployed to the RoboRio and the Trajectory Server.

## Server Setup 

On the Trajectory Server run via the command line by calling `java -jar bob-trajectory.jar`

## RoboRio Setup

Import the jar into your eclipse project into a lib directory.
Right Click the Jar > Build Path > Add to Build Path

Also include the following in your build.properties file:
`lib.dir=${src.dir}/../lib`

`userLibs=${lib.dir}/bob-library-0.0.1.jar;${lib.dir}/bob-trajectory.jar`

## FIRST Robot Code
In robot init start the clients:

    try{
        WaypointClient.start("10.3.19.21");
        TrajectoryClient.start("10.3.19.21");
    }catch(Exception e){
  	  e.printStackTrace();
    }
    
Ensure your Drive Train has somewhere to put the current profile:

	private CombinedSrxMotionProfile currentProfile;

	
	/**
	 * 
	 * @return the latest profile provided by the Trajectory Server
	 */
	public CombinedSrxMotionProfile getCurrentProfile() {
		return currentProfile;
	}

	/**
	 * 
	 * @param currentProfile store the profile that was generated by the Trajectory Server
	 */
	public void setCurrentProfile(CombinedSrxMotionProfile currentProfile) {
		//same as Robot.driveTrain.currentProfile = currentProfile
		this.currentProfile = currentProfile;
	}

Create a command group and add two sequential commands
-Build Spline
-Drive Spline


### Command Examples

A generic command has been created. It can be refenced simply by calling:
`new BuildAndDriveTrajectory(driveTrain, leftTalon, rightTalon, waypointList);

It hadles the generation of a trajectory based on the provided waypoints, and the execution of that trajectory on the drive train via the respective CAN Talons.
